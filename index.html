<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Transkript zu XML</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 960px; margin: auto; }
        textarea { width: 100%; height: 200px; margin-top: 5px; font-family: monospace; }
        .button-group { display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
        button { padding: 10px 15px; font-size: 16px; cursor: pointer; }
        label span { font-weight: normal; font-size: 14px; margin-left: 10px; color: #555; }
    </style>
</head>
<body>
    <h1>Transkript zu XML (Strukturanalyse + Auswertungsschritte)</h1>
    <label for="transkript">Transkript <span id="charCount">0 Zeichen</span></label>
    <textarea id="transkript" placeholder="Geben Sie hier den Originaltext des Transkriptes ein..."></textarea>

    <div class="button-group">
        <button onclick="generateXML()">XML für die KI generieren</button>
        <button onclick="copyToClipboard()">XML für KI in die Zwischenablage speichern</button>
        <button onclick="downloadXML()">XML herunterladen</button>
    </div>

    <label for="xmlOutput">Generiertes XML (editierbar)</label>
    <textarea id="xmlOutput" placeholder="Hier erscheint das generierte XML..."></textarea>

    <script>
        const anmoInput = document.getElementById('transkript');
        const xmlOutput = document.getElementById('xmlOutput');
        const charCount = document.getElementById('charCount');

        anmoInput.addEventListener('input', () => {
            charCount.textContent = anmoInput.value.length + ' Zeichen';
        });

        function generateXML() {
  const text = transkriptInput.value.trim();
  const xml = `<?xml version="1.0" encoding="UTF-8"?>\n<transkript-analyse version="1.0">\n
  <anweisung-fuer-ki><![CDATA[
    Bitte analysiere das folgende Transkript eines TV-Beitrags. Gib mir direkt die Ergebnisse aus Schritt 2 bis 5 aus:

    - Schritt 2: Zentrale Fakten (kompakt in Stichpunkten, objektiv und belegbar)
    - Schritt 3: Zentrales Thema (in einem Satz, kein Zitat, keine wörtliche Rede)
    - Schritt 4: Informative Absicht (journalistische Zielsetzung des Beitrags, sachlich formuliert)
    - Schritt 5: Beteiligte Personen oder Institutionen (Rollen, Funktionen, Namen – soweit im Text genannt)

    Verwende nur belegbare Informationen aus dem Text. Keine erfundenen Inhalte. Keine XML-Ausgabe. Nur Klartext-Ausgabe.
  ]]></anweisung-fuer-ki>\n
  <quelle>\n    <textart>TV-Transkript</textart>\n    <originaltext><![CDATA[\n${text}\n    ]]></originaltext>\n  </quelle>\n
  <struktur>\n
    <gliederung>\n      <abschnitt1><![CDATA[Einleitung / Anmoderation]]></abschnitt1>\n      <abschnitt2><![CDATA[Hauptteil mit O-Tönen / Berichten]]></abschnitt2>\n      <abschnitt3><![CDATA[Ausblick / Fazit / Schlussbild]]></abschnitt3>\n    </gliederung>\n
    <zeitbezug>\n      <zeitpunkt><![CDATA[Vergangenheit, Gegenwart, Zukunft (je nach Inhalt markieren)]]></zeitpunkt>\n    </zeitbezug>\n
    <raumbereich>\n      <ort><![CDATA[Ort(e) der Handlung / des Beitrags – wenn vorhanden]]></ort>\n    </raumbereich>\n
    <themenschwerpunkt>\n      <beschreibung><![CDATA[Hauptthema des Beitrags, übergeordnetes Themafeld]]></beschreibung>\n    </themenschwerpunkt>\n
  </struktur>\n
  <auswertung>\n
    <schritt2>\n      <zentrale_fakten><![CDATA[\n        <!-- Objektive Kerninformationen in Stichpunkten -->\n      ]]></zentrale_fakten>\n    </schritt2>\n
    <schritt3>\n      <zentrales_thema><![CDATA[\n        <!-- Thema in einem prägnanten Satz -->\n      ]]></zentrales_thema>\n    </schritt3>\n
    <schritt4>\n      <informative_absicht><![CDATA[\n        <!-- Was will der Beitrag vermitteln oder erreichen? -->\n      ]]></informative_absicht>\n    </schritt4>\n
    <schritt5>\n      <beteiligte_personen><![CDATA[\n        <!-- Wer kommt vor? (mit Rolle/Funktion) -->\n      ]]></beteiligte_personen>\n    </schritt5>\n
  </auswertung>\n
</transkript-analyse>`;

  transkriptXMLOutput.value = xml;
        }

        function copyToClipboard() {
            xmlOutput.select();
            document.execCommand('copy');
        }

        function downloadXML() {
            const blob = new Blob([xmlOutput.value], { type: 'application/xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'transkript-analyse.xml';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
